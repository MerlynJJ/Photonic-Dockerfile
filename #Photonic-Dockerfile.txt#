#getting image base debian
FROM debian
#Official Debian and Ubuntu images automatically run apt-get clean, so explicit
#invocationis not required.
#I don't use multiple stages writting dockerfile, I use a RUN command with shell
#commands. Refering to docker page
#This is failure-prone and hard to maintain.
#It’s easy to insert another command and forget to continue the line using the
# \ character, for example.
#But is the easyest way to make a dockerfile now, and this form has the advantage
#that this technique is known as “cache busting”.
RUN apt update && apt upgrade \
    && #add non-free to sources.list \
    deb http://www.deb-multimedia.org jessie non-free \
    && apt-get update  && apt-get upgrade
    && apt-get install -y \
    apt-utils \
    deb-multimedia-keyring \ #FAILED
    dialog \
    aptitude \
    less \
    cmake \
    freeglut3-dev \ 
    gfortran \
    gnuplot-qt \
    liblapack-dev \
    libcfitsio-dev \
    libfribidi-dev 
    libgd-dev \
    libgif-dev \
    libgsl-dev \
    libgtk-3-dev \
    libhdf4-dev \
    libhdf5-dev \
    libnetpbm10 \
    libproj-dev \
    libterm-readline-perl-perl \
    libreadline-dev \
    libterm-readline-gnu-perl \
    libtiff5-dev \
    libxft-dev \
    libxi-dev \
    libxmu-dev \
    libxrender-dev \
    libopengl-image-perl \
    libopengl-perl \
    libfftw3-dev \
    make \ 
    netpbm \
    openssh-server \
    tmux \
    sharutils \
    xterm \
    patch \
    zip \
    csh \
    wget \
    && wget -O - https://install.perlbrew.pl |bash \
    && echo source ~/perl5/perlbrew/etc/bashrc >> ~/.bashrc \
    && bash \
    && perlbrew install_cpanm \
    && perlbrew install perl-5.30.3 \
    switch perl-5.30.3 \
    && export DISPLAY=:0
#I don't know if this is better within CMD instruction
#Here starts PDL DEPENDENCIES installation
    && cpanm --look PDL \
    Devel::CheckLib \
    File::Spec \
    File::Temp \  
    Pod::Parser \  
    Pod::Select \
    ExtUtils::MakeMaker \
    Test::Exception \
    Text::Balanced \
    Filter::Util::Call \
    Filter::Simple \
    Module::Compile \
    Inline \
    Inline::C \
    Data::Dumper \
    Convert::UU \
    Storable \
    Devel::REPL \
    Term::ReadLine::Perl \
    Term::ReadLine::Gnu \
    Data::Dump::Streamer \
    Sys::SigAction \
    OpenGL \ #FAILED
    PGPLOT \ #FAILED
    File::Map \
    Term::ReadKey \
    Archive::Extract \
    Shell::Config::Generate \
    Shell:Guess \
    Alien::FFTW3 \
    Alien::HDF4 \
    Alien::Proj4 \
    && perl Makefile.PL \
    && make test \
    install \
#Completing the PDL installation
    && cpanm PDL::FFTW3 \
    PDL::LinearAlgebra \
    PDL::IO::GD \
    PDL::IO::CSV \
    PDL::IO::DBI \
#Photonic, a single shell command
    Photonic


MANTAINER Merlyn Jaqueline Juarez Gutierrez merlynj@icf.unam.mx
MANTAINER Wolf Luis Mochán Backal mochan@icf.unam.mx
